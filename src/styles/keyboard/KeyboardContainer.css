/**
 * KeyboardContainer.css
 * Main keyboard container, header, and layout styling
 * Extracted from Keyboard.css for better organization
 */

.instrument-container {
  /* Standardized container styling */
  position: relative;
  display: flex;
  flex-direction: column;
  background: linear-gradient(145deg, var(--gray-700), var(--gray-900));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  padding: 0;
  margin-top: var(--space-4);
  border-radius: 0;
  border: 1px solid var(--white);
  width: auto;
  max-width: 95vw;
  min-width: auto;
  min-height: 350px;
  overflow-y: visible;
  box-sizing: border-box;
}

.instrument-header-controls {
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
  padding: 0.5rem 1rem;
  border-bottom: none;
  background: transparent;
  border-radius: 0;
  min-height: auto;
}

.header-controls-left {
  display: flex;
  align-items: flex-start;
  gap: var(--space-4);
}

.header-controls-left .notes-toggle-row {
  transform: translateY(5px);
}

.instrument-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1;
  overflow: scroll visible;
}

.instrument-container > * {
  box-sizing: border-box;
}

.instrument-controls-container {
  /* Standardized container styling */
  background: linear-gradient(145deg, var(--gray-700), var(--gray-900));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--white);
  border-radius: 16px;
  width: 100%;
  max-width: 1000px;
  margin: var(--space-4) auto 0 auto;
  padding: 1.25rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-md);
  justify-content: center;
  text-align: center;
  box-sizing: border-box;
}

.instrument-controls-container.guitar-mode {
  margin-top: 0;
}

.instrument-controls-container.bass-mode {
  margin-top: 0;
}

/* Responsive Design */

/* Tablet Layout */
@media (min-width: 481px) and (max-width: 768px) {
  .instrument-container {
    width: 100vw;
    max-width: 100vw;
    margin: var(--space-2) 0 0 0;
    border-radius: 0;
  }

  .instrument-header-controls {
    border-radius: 0;
    padding: 0.5rem 0.75rem;
  }

  .instrument-wrapper {
    overflow-x: scroll;
    -webkit-overflow-scrolling: touch;
  }

  .instrument-container:has(.keyboard-container) {
    min-height: 305px !important;
  }

  .instrument-controls-container {
    width: 700px;
    max-width: 90vw;
    margin: var(--space-4) auto 0 auto;
    padding: 1.25rem;
  }
}

/* Mobile Layout */
@media (max-width: 480px) {
  .instrument-container {
    width: 100vw;
    max-width: 100vw;
    margin: var(--space-1) 0 0 0;
    border-radius: 0;
    min-height: 280px;
  }

  .instrument-header-controls {
    border-radius: 0;
    padding: 0.5rem 0.75rem;
  }

  .instrument-wrapper {
    overflow-x: scroll;
    -webkit-overflow-scrolling: touch;
  }

  .instrument-controls-container {
    width: 100%;
    max-width: 100%;
    margin: var(--space-2) auto 0 auto;
    padding: 1.25rem;
  }
}

/* Very small screens - one button per row, centered */
@media (max-width: 360px) {
  .header-controls-left {
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    gap: var(--gap-xs) !important;
    width: 100% !important;
  }

  .header-controls-left .control-group {
    width: 100% !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Reset all child element margins/padding */
  .header-controls-left .control-group > * {
    margin: 0 !important;
  }

  /* Remove top margins on very small screens for vertical stacking */
  body:has([data-instrument='keyboard']) .control-group.scale-chord-options,
  body:has([data-instrument='guitar']) .control-group.scale-chord-options,
  body:has([data-instrument='bass']) .control-group.scale-chord-options {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  body:has([data-instrument='keyboard']) .control-button.delete-selection,
  body:has([data-instrument='guitar']) .control-button.delete-selection,
  body:has([data-instrument='bass']) .control-button.delete-selection {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  /* Ensure selection mode control group has no extra spacing */
  .header-controls-left .control-group:has(.selection-mode-switch),
  .header-controls-left .control-group.selection-mode-group {
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Force deselect all button container to have no margins */
  .header-controls-left .control-group:has(.delete-selection),
  .header-controls-left > .control-group:has(.delete-selection) {
    margin: 0 !important;
    padding: 0 !important;
  }

  .control-button.delete-selection {
    margin: 0 !important;
  }

  /* Force scale-chord-options to have no gap */
  .control-group.scale-chord-options {
    gap: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  .control-group.scale-chord-options > * {
    margin: 0 !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Override any scale-chord-options child elements */
  .control-group.scale-chord-options .scale-chord-container,
  .control-group.scale-chord-options .scale-options-custom,
  .control-group.scale-chord-options > div {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }

  /* Fix collapsed scale-options-container height */
  .scale-options-container.collapsed {
    min-height: 0 !important;
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
  }
}

/* Height Adjustments */

/* Remove padding and reduce height when instrument container contains guitar or bass */
.instrument-container:has(.guitar-container),
.instrument-container:has(.bass-container) {
  padding: 0;
  min-height: 200px;
}

/* Reduce height when instrument container contains keyboard */
.instrument-container:has(.keyboard-container) {
  min-height: 300px;
}

/* Light mode */
body.light .instrument-container {
  background: linear-gradient(145deg, var(--silver-light), var(--silver-dark));
  border-color: var(--gray-900);
}

body.light .instrument-controls-container {
  background: linear-gradient(145deg, var(--silver-light), var(--silver-dark));
  border-color: var(--gray-900);
}
